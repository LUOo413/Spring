package tw.demospringproject.config;

import java.time.Period;
import java.util.Date;
import java.util.HashMap;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import tw.demospringproject.model.LoginDao;
import tw.demospringproject.model.LoginService;
import tw.demospringproject.model.Person;
import tw.demospringproject.model.TruckBean;
import tw.demospringproject.model.TruckBeanFactory;
import tw.demospringproject.model.TruckBeanStaticFactory;

@Configuration
public class RootAppConfig {
	// 組態設定檔 註冊物件

	@Bean
	public TruckBeanFactory truckBeanFactory() {
		HashMap<Integer, TruckBean> maps = new HashMap<Integer, TruckBean>();
		maps.put(5, new TruckBean(7, "ferrari"));
		maps.put(6, new TruckBean(8, "subaru"));

		TruckBeanFactory tBean = new TruckBeanFactory();
		tBean.setMap(maps);

		return tBean;
	}

	@Bean
	public TruckBean nissanTruck() {
		return TruckBeanStaticFactory.getTruckBean(2);
	}

	@Bean
	public TruckBean toyotaTruck() {
		return TruckBeanStaticFactory.getTruckBean(1);
	}

	@Bean
	public TruckBean truckBean() {
		TruckBean tBean = new TruckBean(1, "Honda");
		return tBean;
	}

	@Bean
	public Date date1() {
		return new Date();
	}

	@Bean // contuct di
	public Person person1() {
		Person p1 = new Person(1, "eric", 25, date1());
		return p1;
	}

	@Bean // setter di
	public Person person2() {
		Person p2 = new Person();
		p2.setId(2);
		p2.setName("rose");
		p2.setAge(32);
		p2.setDate(date1());
		return p2;
	}

	@Bean
	public LoginDao loginDao() {
		return new LoginDao();
	}

	@Bean(name = "loginS1")
	public LoginService loginService1() {
		LoginService ls1 = new LoginService(loginDao());
		return ls1;
	}

	@Bean(name = "loginS2")
	public LoginService loginService2() {
		LoginService ls2 = new LoginService();
		ls2.setLoginDao(loginDao());
		return ls2;
	}

}
